{"version":3,"sources":["components/cards/ProductCardInCheckout.js","pages/Cart.js","images/laptop.png","functions/user.js"],"names":["ProductCardInCheckout","p","dispatch","useDispatch","style","width","height","images","length","small","url","large","laptop","title","price","brand","onChange","e","console","log","target","value","cart","window","localStorage","getItem","JSON","parse","map","product","i","_id","color","setItem","stringify","type","payload","name","className","filter","c","key","count","quantity","toast","error","shipping","CheckCircleOutlined","CloseCircleOutlined","CloseOutlined","onClick","splice","Cart","history","useSelector","state","user","scope","to","reduce","currentValue","nextValue","userCart","token","then","res","data","ok","push","catch","err","disabled","pathname","from","module","exports","authtoken","a","axios","post","process","headers","getUserCart","get","emptyUserCart","delete","saveUserAddress","address","applyCoupon","coupon","createOrder","stripeResponse","getUserOrders","getWishlist","removeWishlist","productId","put","addToWishlist","createCashOrderForUser","COD","couponTrueOrFalse","couponApplied"],"mappings":"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","file":"static/js/38.ed77cae0.chunk.js","sourcesContent":["import React from \"react\";\nimport ModalImage from \"react-modal-image\";\nimport laptop from \"../../images/laptop.png\";\nimport { useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport {\n  CheckCircleOutlined,\n  CloseCircleOutlined,\n  CloseOutlined,\n} from \"@ant-design/icons\";\n\nconst ProductCardInCheckout = ({ p }) => {\n  const colors = [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"];\n  let dispatch = useDispatch();\n\n  const handleColorChange = (e) => {\n    console.log(\"color changed\", e.target.value);\n\n    let cart = [];\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n\n      cart.map((product, i) => {\n        if (product._id === p._id) {\n          cart[i].color = e.target.value;\n        }\n      });\n\n      //  console.log('cart udpate color', cart)\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  const handleQuantityChange = (e) => {\n    // console.log(\"available quantity\", p.quantity);\n    let count = e.target.value < 1 ? 1 : e.target.value;\n\n    if (count > p.quantity) {\n      toast.error(`Max available quantity: ${p.quantity}`);\n      return;\n    }\n\n    let cart = [];\n\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n\n      cart.map((product, i) => {\n        if (product._id == p._id) {\n          cart[i].count = count;\n        }\n      });\n\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  const handleRemove = () => {\n    // console.log(p._id, \"to remove\");\n    let cart = [];\n\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n      // [1,2,3,4,5]\n      cart.map((product, i) => {\n        if (product._id === p._id) {\n          cart.splice(i, 1);\n        }\n      });\n\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  return (\n    <tbody>\n      <tr>\n        <td>\n          <div style={{ width: \"100px\", height: \"auto\" }}>\n            {p.images.length ? (\n              <ModalImage small={p.images[0].url} large={p.images[0].url} />\n            ) : (\n              <ModalImage small={laptop} large={laptop} />\n            )}\n          </div>\n        </td>\n        <td>{p.title}</td>\n        <td>${p.price}</td>\n        <td>{p.brand}</td>\n        <td>\n          <select\n            onChange={handleColorChange}\n            name=\"color\"\n            className=\"form-control\"\n          >\n            {p.color ? (\n              <option value={p.color}>{p.color}</option>\n            ) : (\n              <option>Select</option>\n            )}\n            {colors\n              .filter((c) => c !== p.color)\n              .map((c) => (\n                <option key={c} value={c}>\n                  {c}\n                </option>\n              ))}\n          </select>\n        </td>\n        <td className=\"text-center\">\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            value={p.count}\n            onChange={handleQuantityChange}\n          />\n        </td>\n        <td className=\"text-center\">\n          {p.shipping === \"Yes\" ? (\n            <CheckCircleOutlined className=\"text-success\" />\n          ) : (\n            <CloseCircleOutlined className=\"text-danger\" />\n          )}\n        </td>\n        <td className=\"text-center\">\n          <CloseOutlined\n            onClick={handleRemove}\n            className=\"text-danger pointer\"\n          />\n        </td>\n      </tr>\n    </tbody>\n  );\n};\n\nexport default ProductCardInCheckout;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport ProductCardInCheckout from \"../components/cards/ProductCardInCheckout\";\nimport { userCart } from \"../functions/user\";\n\nconst Cart = ({ history }) => {\n  const { cart, user } = useSelector((state) => ({ ...state }));\n  const dispatch = useDispatch();\n\n  const getTotal = () => {\n    return cart.reduce((currentValue, nextValue) => {\n      return currentValue + nextValue.count * nextValue.price;\n    }, 0);\n  };\n\n  const saveOrderToDb = () => {\n    // console.log(\"cart\", JSON.stringify(cart, null, 4));\n    userCart(cart, user.token)\n      .then((res) => {\n        console.log(\"CART POST RES\", res);\n        if (res.data.ok) history.push(\"/checkout\");\n      })\n      .catch((err) => console.log(\"cart save err\", err));\n  };\n\n  const saveCashOrderToDb = () => {\n    // console.log(\"cart\", JSON.stringify(cart, null, 4));\n    dispatch({\n      type: \"COD\",\n      payload: true,\n    });\n    userCart(cart, user.token)\n      .then((res) => {\n        console.log(\"CART POST RES\", res);\n        if (res.data.ok) history.push(\"/checkout\");\n      })\n      .catch((err) => console.log(\"cart save err\", err));\n  };\n\n  const showCartItems = () => (\n    <table className=\"table table-bordered\">\n      <thead className=\"thead-light\">\n        <tr>\n          <th scope=\"col\">Image</th>\n          <th scope=\"col\">Title</th>\n          <th scope=\"col\">Price</th>\n          <th scope=\"col\">Brand</th>\n          <th scope=\"col\">Color</th>\n          <th scope=\"col\">Count</th>\n          <th scope=\"col\">Shipping</th>\n          <th scope=\"col\">Remove</th>\n        </tr>\n      </thead>\n\n      {cart.map((p) => (\n        <ProductCardInCheckout key={p._id} p={p} />\n      ))}\n    </table>\n  );\n\n  return (\n    <div className=\"container-fluid pt-2\">\n      <div className=\"row\">\n        <div className=\"col-md-8\">\n          <h4>Cart / {cart.length} Product</h4>\n\n          {!cart.length ? (\n            <p>\n              No products in cart. <Link to=\"/shop\">Continue Shopping.</Link>\n            </p>\n          ) : (\n            showCartItems()\n          )}\n        </div>\n        <div className=\"col-md-4\">\n          <h4>Order Summary</h4>\n          <hr />\n          <p>Products</p>\n          {cart.map((c, i) => (\n            <div key={i}>\n              <p>\n                {c.title} x {c.count} = ${c.price * c.count}\n              </p>\n            </div>\n          ))}\n          <hr />\n          Total: <b>${getTotal()}</b>\n          <hr />\n          {user ? (\n            <>\n              <button\n                onClick={saveCashOrderToDb}\n                className=\"btn btn-sm btn-warning mt-2\"\n                disabled={!cart.length}\n              >\n                Pay Cash on Delivery\n              </button>\n            </>\n          ) : (\n            <button className=\"btn btn-sm btn-primary mt-2\">\n              <Link\n                to={{\n                  pathname: \"/login\",\n                  state: { from: \"cart\" },\n                }}\n              >\n                Login to Checkout\n              </Link>\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n","module.exports = __webpack_public_path__ + \"static/media/laptop.f51f9ca6.png\";","import axios from \"axios\";\n\nexport const userCart = async (cart, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/cart`,\n    { cart },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const getUserCart = async (authtoken) =>\n  await axios.get(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const emptyUserCart = async (authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n\n// const saveAddressToDb = async (e) => {\n//   e.preventDefault();\n//   console.log(\n//     \"ADDRESS INPUT FROM USER ===> \",\n//     address,\n//     city,\n//     state,\n//     postalCode,\n//     country\n//   );\n\n//   const res = await axios.post(\n//     `http://localhost:8000/api/user/address`,\n//     { address, city, state, postalCode, country },\n//     {\n//       headers: {\n//         authtoken,\n//       },\n//     }\n//   );\n// };\n\nexport const saveUserAddress = async (authtoken, address) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/address`,\n    { address },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const applyCoupon = async (authtoken, coupon) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/cart/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const createOrder = async (stripeResponse, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/order`,\n    { stripeResponse },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const getUserOrders = async (authtoken) =>\n  await axios.get(`${process.env.REACT_APP_API}/user/orders`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const getWishlist = async (authtoken) =>\n  await axios.get(`${process.env.REACT_APP_API}/user/wishlist`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const removeWishlist = async (productId, authtoken) =>\n  await axios.put(\n    `${process.env.REACT_APP_API}/user/wishlist/${productId}`,\n    {},\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const addToWishlist = async (productId, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/wishlist`,\n    { productId },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n\nexport const createCashOrderForUser = async (\n  authtoken,\n  COD,\n  couponTrueOrFalse\n) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/user/cash-order`,\n    { couponApplied: couponTrueOrFalse, COD },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n"],"sourceRoot":""}