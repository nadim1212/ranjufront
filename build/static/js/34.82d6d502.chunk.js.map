{"version":3,"sources":["functions/coupon.js","pages/admin/coupon/CreateCouponPage.js","components/sidebar/Sidebar.jsx"],"names":["getCoupons","a","axios","get","process","removeCoupon","couponId","authtoken","delete","headers","createCoupon","coupon","post","CreateCouponPage","useState","name","setName","expiry","setExpiry","discount","setDiscount","loading","setLoading","coupons","setCoupons","user","useSelector","state","useEffect","loadAllCoupons","then","res","data","className","Sidebar","onSubmit","e","preventDefault","token","toast","success","catch","err","console","log","type","onChange","target","value","autoFocus","required","selected","Date","date","length","scope","map","c","key","_id","toLocaleDateString","DeleteOutlined","onClick","window","confirm","error","to","style","textDecoration"],"mappings":"sOAEaA,EAAU,uCAAG,sBAAAC,EAAA,sEAClBC,IAAMC,IAAN,UAAaC,qCAAb,aADkB,mFAAH,qDAGVC,EAAY,uCAAG,WAAOC,EAAUC,GAAjB,SAAAN,EAAA,sEACpBC,IAAMM,OAAN,UAAgBJ,qCAAhB,mBAAoDE,GAAY,CACpEG,QAAS,CACPF,eAHsB,mFAAH,wDAOZG,EAAY,uCAAG,WAAOC,EAAQJ,GAAf,SAAAN,EAAA,sEACpBC,IAAMU,KAAN,UACDR,qCADC,WAEJ,CAAEO,UACF,CACEF,QAAS,CACPF,eANoB,mFAAH,wD,4BCsIVM,UArIU,WAAO,IAAD,EACLC,mBAAS,IADJ,mBACtBC,EADsB,KAChBC,EADgB,OAEDF,mBAAS,IAFR,mBAEtBG,EAFsB,KAEdC,EAFc,OAGGJ,mBAAS,IAHZ,mBAGtBK,EAHsB,KAGZC,EAHY,OAICN,mBAAS,IAJV,mBAItBO,EAJsB,KAIbC,EAJa,OAKCR,mBAAS,IALV,mBAKtBS,EALsB,KAKbC,EALa,KAQrBC,EAASC,aAAY,SAACC,GAAD,sBAAiBA,MAAtCF,KAERG,qBAAU,WACRC,MACC,IAEH,IAAMA,EAAiB,kBAAM7B,IAAa8B,MAAK,SAACC,GAAD,OAASP,EAAWO,EAAIC,UA+BvE,OACE,yBAAKC,UAAU,mBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,YACb,kBAACC,EAAA,EAAD,OAEF,yBAAKD,UAAU,aACZZ,EACC,wBAAIY,UAAU,eAAc,cAE5B,4BAAI,UAGN,0BAAME,SA1CO,SAACC,GACpBA,EAAEC,iBACFf,GAAW,GAEXZ,EAAa,CAAEK,OAAME,SAAQE,YAAYM,EAAKa,OAC3CR,MAAK,SAACC,GACLT,GAAW,GACXO,IACAb,EAAQ,IACRI,EAAY,IACZF,EAAU,IACVqB,IAAMC,QAAN,WAAkBT,EAAIC,KAAKjB,KAA3B,oBAED0B,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAI,oBAAqBF,QA8B3C,yBAAKT,UAAU,cACb,2BAAOA,UAAU,cAAa,QAC9B,2BACEY,KAAK,OACLZ,UAAU,eACVa,SAAU,SAACV,GAAD,OAAOpB,EAAQoB,EAAEW,OAAOC,QAClCA,MAAOjC,EACPkC,WAAS,EACTC,UAAQ,KAIZ,yBAAKjB,UAAU,cACb,2BAAOA,UAAU,cAAa,cAC9B,2BACEY,KAAK,OACLZ,UAAU,eACVa,SAAU,SAACV,GAAD,OAAOhB,EAAYgB,EAAEW,OAAOC,QACtCA,MAAO7B,EACP+B,UAAQ,KAIZ,yBAAKjB,UAAU,cACb,2BAAOA,UAAU,cAAa,UAC9B,6BACA,kBAAC,IAAD,CACEA,UAAU,eACVkB,SAAU,IAAIC,KACdJ,MAAO/B,EACP6B,SAAU,SAACO,GAAD,OAAUnC,EAAUmC,IAC9BH,UAAQ,KAIZ,4BAAQjB,UAAU,2BAA0B,SAG9C,6BAEA,4BAAKV,EAAQ+B,OAAO,YAEpB,2BAAOrB,UAAU,wBACf,2BAAOA,UAAU,eACf,4BACE,wBAAIsB,MAAM,OAAM,QAChB,wBAAIA,MAAM,OAAM,UAChB,wBAAIA,MAAM,OAAM,YAChB,wBAAIA,MAAM,OAAM,YAIpB,+BACGhC,EAAQiC,KAAI,SAACC,GAAD,OACX,wBAAIC,IAAKD,EAAEE,KACT,4BAAKF,EAAE1C,MACP,4BAAK,IAAIqC,KAAKK,EAAExC,QAAQ2C,sBACxB,4BAAKH,EAAEtC,SAAS,KAChB,4BACE,kBAAC0C,EAAA,EAAD,CACEC,QAAS,kBAvFPxD,EAuF0BmD,EAAEE,SAtF5CI,OAAOC,QAAQ,aACjB1C,GAAW,GACXjB,EAAaC,EAAUmB,EAAKa,OACzBR,MAAK,SAACC,GACLF,IACAP,GAAW,GACXiB,IAAM0B,MAAN,kBAAuBlC,EAAIC,KAAKjB,KAAhC,iBAED0B,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,QATb,IAACpC,GAwFF2B,UAAU,oC,iCCrIhC,6HAgGeC,IAlFC,WACd,OACE,yBAAKD,UAAU,WAEb,6BACA,yBAAKA,UAAU,UACb,4BACE,uBAAGA,UAAU,SAAQ,QACrB,4BACA,kBAAC,IAAD,CAAMiC,GAAG,mBAAmBC,MAAO,CAAEC,eAAgB,SACnD,kBAAC,IAAD,CAAenC,UAAU,SACzB,8BAAM,eAGR,uBAAGA,UAAU,SAAQ,sBACrB,kBAAC,IAAD,CAAMiC,GAAG,SAASC,MAAO,CAAEC,eAAgB,UAEzC,4BACA,kBAAC,IAAD,CAAMF,GAAG,iBAAiBC,MAAO,CAAEC,eAAgB,SACjD,kBAAC,IAAD,CAAWnC,UAAU,SACrB,8BAAM,qBAIH,4BACL,kBAAC,IAAD,CAAMiC,GAAG,kBAAkBC,MAAO,CAAEC,eAAgB,SAClD,kBAAC,IAAD,CAAWnC,UAAU,SACrB,8BAAM,kBAKR,4BACA,kBAAC,IAAD,CAAMiC,GAAG,kBAAkBC,MAAO,CAAEC,eAAgB,SAClD,kBAAC,IAAD,CAAWnC,UAAU,SACrB,8BAAM,mBAKV,uBAAGA,UAAU,SAAQ,uBACrB,4BACA,kBAAC,IAAD,CAAMiC,GAAG,kBAAkBC,MAAO,CAAEC,eAAgB,SAClD,kBAAC,IAAD,CAAgBnC,UAAU,SAC1B,8BAAM,gBAIR,4BACA,kBAAC,IAAD,CAAMiC,GAAG,aAAaC,MAAO,CAAEC,eAAgB,SAC7C,kBAAC,IAAD,CAAgBnC,UAAU,SAC1B,8BAAM,oBAIR,uBAAGA,UAAU,SAAQ,qBACpB,4BACA,kBAAC,IAAD,CAAMiC,GAAG,gBAAgBjC,UAAU,YAClC,kBAAC,IAAD,CAAgBA,UAAU,SAC1B,8BAAM,YAGR,uBAAGA,UAAU,SAAQ,mBACrB,4BACE,kBAAC,IAAD,CAA2BA,UAAU,SACrC,8BAAM,cAER,4BACE,kBAAC,IAAD,CAA2BA,UAAU,SACrC,8BAAM,eAER,4BACE,kBAAC,IAAD,CAAeA,UAAU,SACzB,8BAAM,gB","file":"static/js/34.82d6d502.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const getCoupons = async () =>\n  await axios.get(`${process.env.REACT_APP_API}/coupons`);\n\nexport const removeCoupon = async (couponId, authtoken) =>\n  await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\n    headers: {\n      authtoken,\n    },\n  });\n\nexport const createCoupon = async (coupon, authtoken) =>\n  await axios.post(\n    `${process.env.REACT_APP_API}/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n","import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport DatePicker from \"react-datepicker\";\nimport {\n  getCoupons,\n  removeCoupon,\n  createCoupon,\n} from \"../../../functions/coupon\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport Sidebar from \"../../../components/sidebar/Sidebar\";\n\nconst CreateCouponPage = () => {\n  const [name, setName] = useState(\"\");\n  const [expiry, setExpiry] = useState(\"\");\n  const [discount, setDiscount] = useState(\"\");\n  const [loading, setLoading] = useState(\"\");\n  const [coupons, setCoupons] = useState([]);\n\n  // redux\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllCoupons();\n  }, []);\n\n  const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // console.table(name, expiry, discount);\n    createCoupon({ name, expiry, discount }, user.token)\n      .then((res) => {\n        setLoading(false);\n        loadAllCoupons(); // load all coupons\n        setName(\"\");\n        setDiscount(\"\");\n        setExpiry(\"\");\n        toast.success(`\"${res.data.name}\" is created`);\n      })\n      .catch((err) => console.log(\"create coupon err\", err));\n  };\n\n  const handleRemove = (couponId) => {\n    if (window.confirm(\"Delete?\")) {\n      setLoading(true);\n      removeCoupon(couponId, user.token)\n        .then((res) => {\n          loadAllCoupons(); // load all coupons\n          setLoading(false);\n          toast.error(`Coupon \"${res.data.name}\" deleted`);\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <Sidebar />\n        </div>\n        <div className=\"col-md-10\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>Coupon</h4>\n          )}\n\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(e) => setName(e.target.value)}\n                value={name}\n                autoFocus\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Discount %</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(e) => setDiscount(e.target.value)}\n                value={discount}\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Expiry</label>\n              <br />\n              <DatePicker\n                className=\"form-control\"\n                selected={new Date()}\n                value={expiry}\n                onChange={(date) => setExpiry(date)}\n                required\n              />\n            </div>\n\n            <button className=\"btn btn-outline-primary\">Save</button>\n          </form>\n\n          <br />\n\n          <h4>{coupons.length} Coupons</h4>\n\n          <table className=\"table table-bordered\">\n            <thead className=\"thead-light\">\n              <tr>\n                <th scope=\"col\">Name</th>\n                <th scope=\"col\">Expiry</th>\n                <th scope=\"col\">Discount</th>\n                <th scope=\"col\">Action</th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {coupons.map((c) => (\n                <tr key={c._id}>\n                  <td>{c.name}</td>\n                  <td>{new Date(c.expiry).toLocaleDateString()}</td>\n                  <td>{c.discount}%</td>\n                  <td>\n                    <DeleteOutlined\n                      onClick={() => handleRemove(c._id)}\n                      className=\"text-danger pointer\"\n                    />\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateCouponPage;\n","import \"./sidebar.scss\";\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\nimport PersonOutlineIcon from \"@mui/icons-material/PersonOutline\";\nimport LocalShippingIcon from \"@mui/icons-material/LocalShipping\";\nimport CreditCardIcon from \"@mui/icons-material/CreditCard\";\nimport StoreIcon from \"@mui/icons-material/Store\";\nimport InsertChartIcon from \"@mui/icons-material/InsertChart\";\nimport SettingsApplicationsIcon from \"@mui/icons-material/SettingsApplications\";\nimport ExitToAppIcon from \"@mui/icons-material/ExitToApp\";\nimport AccountCircleOutlinedIcon from \"@mui/icons-material/AccountCircleOutlined\";\nimport { Link } from \"react-router-dom\";\nimport { useContext } from \"react\";\nimport React, { Component }  from 'react';\n\nconst Sidebar = () => {\n  return (\n    <div className=\"sidebar\">\n    \n      <hr />\n      <div className=\"center\">\n        <ul>\n          <p className=\"title\">MAIN</p>\n          <li>\n          <Link to=\"/admin/dashboard\" style={{ textDecoration: \"none\" }}>\n            <DashboardIcon className=\"icon\" />\n            <span>Dashboard</span>\n            </Link>\n          </li>\n          <p className=\"title\">Product Management</p>\n          <Link to=\"/users\" style={{ textDecoration: \"none\" }}>\n          </Link>\n            <li>\n            <Link to=\"/admin/product\" style={{ textDecoration: \"none\" }}>\n              <StoreIcon className=\"icon\" />\n              <span>Create Products</span>\n              </Link> \n            </li>\n         \n                 <li>\n            <Link to=\"/admin/products\" style={{ textDecoration: \"none\" }}>\n              <StoreIcon className=\"icon\" />\n              <span>All Products</span>\n              </Link>\n            </li>\n         \n         \n            <li>\n            <Link to=\"/admin/products\" style={{ textDecoration: \"none\" }}>\n              <StoreIcon className=\"icon\" />\n              <span>Product Stock</span>\n              </Link>\n            </li>\n         \n        \n          <p className=\"title\">Category Management</p>\n          <li>\n          <Link to=\"/admin/category\" style={{ textDecoration: \"none\" }}>\n            <CreditCardIcon className=\"icon\" />\n            <span>Categories</span>\n            </Link>\n          </li>\n         \n          <li>\n          <Link to=\"/admin/sub\" style={{ textDecoration: \"none\" }}>\n            <CreditCardIcon className=\"icon\" />\n            <span>Sub Categories</span>\n            </Link>\n          </li>\n          \n          <p className=\"title\">Coupon Management</p>\n           <li>\n           <Link to=\"/admin/coupon\" className=\"nav-link\">\n            <CreditCardIcon className=\"icon\" />\n            <span>Coupon</span>\n            </Link>\n          </li>\n          <p className=\"title\">USER MANAGEMENT</p>\n          <li>\n            <AccountCircleOutlinedIcon className=\"icon\" />\n            <span>All Users</span>\n          </li>\n          <li>\n            <AccountCircleOutlinedIcon className=\"icon\" />\n            <span>Users Role</span>\n          </li>\n          <li>\n            <ExitToAppIcon className=\"icon\" />\n            <span>Logout</span>\n          </li>\n        </ul>\n      </div>\n   \n    </div>\n  );\n};\n\nexport default Sidebar;\n"],"sourceRoot":""}